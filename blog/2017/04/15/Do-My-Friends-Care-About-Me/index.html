<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
            <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-89717266-1"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', 'UA-89717266-1');
        </script>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
        <link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/styles/a11y-dark.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/highlight.min.js"></script>
        <link href="/css/base.css" rel="stylesheet">

        <title>Do My Friends Care About Me?</title>
    <link href="/css/blog.css" rel="stylesheet"></head>
    <body>
        <div class="content">
        <nav>
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="/blog">Blog</a></li>
                <li><a href="/feed.xml"><span class="small-caps">RSS</span></a></li>
            </ul> 
        </nav>
        
<article>
    <h1 class="title">Do My Friends Care About Me?</h1>
    <section><h2>A Brief Analysis of my Facebook Friends</h2><p>This was a (not so) quick look at how I stacked up against my Facebook friends in a to­tally ar­bi­trary mea­sure.</p><p>I looked at the ra­tio of likes and re­acts (henceforth to be re­ferred to as a sin­gu­lar en­tity:<span class="push-double"></span> <span class="pull-double">“</span>realikes”) to a user’s pro­file pic­ture to that user’s friend count. That is, what per­cent­age of a user’s friends re­aliked his or her pro­file pic­ture?</p><h3>Gathering Data</h3><p><em>I’ll post a more de­tailed write-up of the tech­ni­cal as­pects of scrap­ing the Facebook pro­files, as well as an iPython Notebook with the code.</em></p><p>The most chal­leng­ing (and time con­sum­ing) part was gath­er­ing the data. I ran into sev­eral dead ends be­fore fi­nally scrap­ing the data from Facebook us­ing Selenium. I’ll go through all of the failed meth­ods and my suc­ceess­ful method here.</p><p>I had al­ready col­lected a list of Facebook pro­file URLs just us­ing Chrome Dev Tools on the client side.</p><p>My first idea was to use the Facebook Graph <span class="small-caps">API</span>. However, that quickly proved to be im­pos­si­ble, mainly be­cause <a href="http://stackoverflow.com/a/39649908">this StackOverflow an­swer</a> said so.</p><p>So on to the sec­ond so­lu­tion! I fig­ured I could use the python <code>requests</code> and <code>beautifulsoup</code> li­braries to crawl Facebook, and just pass in my Facebook cook­ies for auth. While the au­then­ti­ca­tion to­tally worked (exciting!), I dis­cov­ered that Facebook does ba­si­cally all of the ren­der­ing client side, so the <span class="small-caps">HTML</span> that I re­ceived was just a bunch of links to async scripts.</p><p>Ultimately, I re­sorted to Selenium to scrap­ing first the links to pro­file pic­tures, and later, the ac­tual re­alike counts.</p><h3>Examining the Data</h3><p>After a lit­tle bit of clean­ing up in Excel, I was ready to take a deeper look at the data.</p><pre><code class="hljs language-python"><span class="hljs-comment"># Import our beloved libraries</span>

<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
</code></pre><pre><code class="hljs language-python"><span class="hljs-comment"># Read in the data</span>

data = pd.read_csv(<span class="hljs-string">'./data.csv'</span>)
</code></pre><pre><code class="hljs language-python"><span class="hljs-comment"># View the first 5 entries</span>

data[:<span class="hljs-number">5</span>]
</code></pre><div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th># Likes on Pic</th>
      <th># Friends</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>77.0</td>
      <td>321.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>137.0</td>
      <td>527.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>176.0</td>
      <td>563.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>54.0</td>
      <td>898.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>103.0</td>
      <td>283.0</td>
    </tr>
  </tbody>
</table>
</div><pre><code class="hljs language-python"><span class="hljs-comment"># This includes "bad" rows, which don't have values for either or both of the columns</span>
<span class="hljs-built_in">len</span>(data)
</code></pre><pre><code class="hljs"></code></pre><pre><code class="hljs language-python"><span class="hljs-comment"># Drop the bad stuff</span>
data = data.dropna()
</code></pre><pre><code class="hljs language-python"><span class="hljs-built_in">len</span>(data)
</code></pre><pre><code class="hljs"></code></pre><pre><code class="hljs language-python">plt.plot(data[<span class="hljs-string">'# Friends'</span>], data[<span class="hljs-string">'# Likes on Pic'</span>], <span class="hljs-string">'bo'</span>)
plt.title(<span class="hljs-string">'Realikes to Friend Count'</span>)
plt.ylabel(<span class="hljs-string">'Realikes'</span>)
plt.xlabel(<span class="hljs-string">'# Friends'</span>)
</code></pre><pre><code class="hljs language-mipsasm">&#x3C;matplotlib<span class="hljs-meta">.text</span><span class="hljs-meta">.Text</span> <span class="hljs-built_in">at</span> <span class="hljs-number">0x115283f28</span>>
</code></pre><figure>
<img src="/assets/img/output_7_1" alt="">
</figure><p>There seems to be a gen­eral up­wards trend, with users with more friends re­ceiv­ing a greater amount of likes from friends. This makes sense, since their pic­tures go out to a larger au­di­ence. I am more in­ter­ested in the ra­tio be­tween the re­alike count and friend count.</p><h3>Looking at the Realike Ratios</h3><pre><code class="hljs language-python"><span class="hljs-comment"># Insert new column of the ratios.</span>
data[<span class="hljs-string">'Ratio'</span>] = data[<span class="hljs-string">'# Likes on Pic'</span>] / data[<span class="hljs-string">'# Friends'</span>]
</code></pre><pre><code class="hljs language-python"><span class="hljs-comment"># First look at the ratios! Just a brief summary.</span>
data[<span class="hljs-string">'Ratio'</span>].describe()
</code></pre><pre><code class="hljs language-apache"><span class="hljs-attribute">count</span>    <span class="hljs-number">278</span>.<span class="hljs-number">000000</span>
<span class="hljs-attribute">mean</span>       <span class="hljs-number">0</span>.<span class="hljs-number">158833</span>
<span class="hljs-attribute">std</span>        <span class="hljs-number">0</span>.<span class="hljs-number">093243</span>
<span class="hljs-attribute">min</span>        <span class="hljs-number">0</span>.<span class="hljs-number">000000</span>
<span class="hljs-attribute">25</span>%        <span class="hljs-number">0</span>.<span class="hljs-number">083202</span>
<span class="hljs-attribute">50</span>%        <span class="hljs-number">0</span>.<span class="hljs-number">159469</span>
<span class="hljs-attribute">75</span>%        <span class="hljs-number">0</span>.<span class="hljs-number">220952</span>
<span class="hljs-attribute">max</span>        <span class="hljs-number">0</span>.<span class="hljs-number">492114</span>
<span class="hljs-attribute">Name</span>: Ratio, dtype: float<span class="hljs-number">64</span>
</code></pre><p>Ok, so this sum­mary pro­vides some in­ter­est­ing in­for­ma­tion.</p><p>Just from click­ing around Facebook ear­lier, I had thought that the av­er­age ra­tio would be some­where be­tween 20% and 30%, but it ended up be­ing much lower, at 15.9%.</p><p>Also in­ter­est­ing to note is that no one had over half of their friends like their pro­file pic­ture, al­though the max of 49.2% came pretty close.</p><pre><code class="hljs language-python"><span class="hljs-comment"># Sort data by friend count</span>
data = data.sort_values(by=<span class="hljs-string">'# Friends'</span>)
</code></pre><pre><code class="hljs language-python">%matplotlib inline

plt.plot(data[<span class="hljs-string">'# Friends'</span>], data.Ratio, <span class="hljs-string">'bo'</span>)
plt.xlabel(<span class="hljs-string">'# Friends'</span>)
plt.ylabel(<span class="hljs-string">'Ratio'</span>)
plt.title(<span class="hljs-string">'# Friends vs Realike Ratio'</span>)
</code></pre><pre><code class="hljs language-mipsasm">&#x3C;matplotlib<span class="hljs-meta">.text</span><span class="hljs-meta">.Text</span> <span class="hljs-built_in">at</span> <span class="hljs-number">0x113fc76a0</span>>
</code></pre><img src="/assets/img/output_14_1.png" alt=""><p>One of the biggest things I was hop­ing to see was a cor­re­la­tion be­tween friend size and ra­tio. However, that did not re­ally man­i­fest it­self. As you can see, the points are rel­a­tively evenly dis­trib­uted.</p><pre><code class="hljs language-python"><span class="hljs-comment"># Top 5 realike ratios.</span>
data.sort_values(by=<span class="hljs-string">'Ratio'</span>, ascending=<span class="hljs-literal">False</span>)[:<span class="hljs-number">5</span>]
</code></pre><div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th># Likes on Pic</th>
      <th># Friends</th>
      <th>Ratio</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>8</th>
      <td>156.0</td>
      <td>317.0</td>
      <td>0.492114</td>
    </tr>
    <tr>
      <th>11</th>
      <td>155.0</td>
      <td>376.0</td>
      <td>0.412234</td>
    </tr>
    <tr>
      <th>158</th>
      <td>280.0</td>
      <td>742.0</td>
      <td>0.377358</td>
    </tr>
    <tr>
      <th>4</th>
      <td>103.0</td>
      <td>283.0</td>
      <td>0.363958</td>
    </tr>
    <tr>
      <th>12</th>
      <td>406.0</td>
      <td>1118.0</td>
      <td>0.363148</td>
    </tr>
  </tbody>
</table>
</div><pre><code class="hljs language-python"><span class="hljs-comment"># Bottom 5 realike ratios.</span>
data.sort_values(by=<span class="hljs-string">'Ratio'</span>, ascending=<span class="hljs-literal">True</span>)[:<span class="hljs-number">5</span>]
</code></pre><div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th># Likes on Pic</th>
      <th># Friends</th>
      <th>Ratio</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>92</th>
      <td>0.0</td>
      <td>125.0</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>40</th>
      <td>0.0</td>
      <td>117.0</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>299</th>
      <td>1.0</td>
      <td>370.0</td>
      <td>0.002703</td>
    </tr>
    <tr>
      <th>57</th>
      <td>2.0</td>
      <td>539.0</td>
      <td>0.003711</td>
    </tr>
    <tr>
      <th>89</th>
      <td>6.0</td>
      <td>826.0</td>
      <td>0.007264</td>
    </tr>
  </tbody>
</table>
</div><p>Viewing the low­est 5 re­alike ra­tios re­veals that those with the low­est friend counts do <em>not</em> have the low­est re­alike ra­tios.</p><h4>Does Friend Count Matter?</h4><p>I then took a look at the dis­tri­b­u­tions for users with more than 1000 friends com­pared to users with fewer than 1000 friends.</p><p>It’s im­por­tant to note that there are sig­nif­i­cantly more users with fewer than 1000 friends in my data set.</p><pre><code class="hljs language-python">gt1000 = data.loc[data[<span class="hljs-string">'# Friends'</span>] >= <span class="hljs-number">1000</span>]
lt1000 = data.loc[data[<span class="hljs-string">'# Friends'</span>] &#x3C; <span class="hljs-number">1000</span>]
</code></pre><pre><code class="hljs language-python"><span class="hljs-built_in">len</span>(gt1000)
</code></pre><pre><code class="hljs"></code></pre><pre><code class="hljs language-python">gt1000[<span class="hljs-string">'Ratio'</span>].describe()
</code></pre><pre><code class="hljs language-apache"><span class="hljs-attribute">count</span>    <span class="hljs-number">44</span>.<span class="hljs-number">000000</span>
<span class="hljs-attribute">mean</span>      <span class="hljs-number">0</span>.<span class="hljs-number">173164</span>
<span class="hljs-attribute">std</span>       <span class="hljs-number">0</span>.<span class="hljs-number">084129</span>
<span class="hljs-attribute">min</span>       <span class="hljs-number">0</span>.<span class="hljs-number">008739</span>
<span class="hljs-attribute">25</span>%       <span class="hljs-number">0</span>.<span class="hljs-number">116832</span>
<span class="hljs-attribute">50</span>%       <span class="hljs-number">0</span>.<span class="hljs-number">180046</span>
<span class="hljs-attribute">75</span>%       <span class="hljs-number">0</span>.<span class="hljs-number">219244</span>
<span class="hljs-attribute">max</span>       <span class="hljs-number">0</span>.<span class="hljs-number">363148</span>
<span class="hljs-attribute">Name</span>: Ratio, dtype: float<span class="hljs-number">64</span>
</code></pre><pre><code class="hljs language-python">lt1000[<span class="hljs-string">'Ratio'</span>].describe()
</code></pre><pre><code class="hljs language-apache"><span class="hljs-attribute">count</span>    <span class="hljs-number">234</span>.<span class="hljs-number">000000</span>
<span class="hljs-attribute">mean</span>       <span class="hljs-number">0</span>.<span class="hljs-number">156139</span>
<span class="hljs-attribute">std</span>        <span class="hljs-number">0</span>.<span class="hljs-number">094783</span>
<span class="hljs-attribute">min</span>        <span class="hljs-number">0</span>.<span class="hljs-number">000000</span>
<span class="hljs-attribute">25</span>%        <span class="hljs-number">0</span>.<span class="hljs-number">072971</span>
<span class="hljs-attribute">50</span>%        <span class="hljs-number">0</span>.<span class="hljs-number">155958</span>
<span class="hljs-attribute">75</span>%        <span class="hljs-number">0</span>.<span class="hljs-number">220952</span>
<span class="hljs-attribute">max</span>        <span class="hljs-number">0</span>.<span class="hljs-number">492114</span>
<span class="hljs-attribute">Name</span>: Ratio, dtype: float<span class="hljs-number">64</span>
</code></pre><p>The mean ra­tio for those with > 1000 friends is a lit­tle bit larger than those with­out, as is the me­dian.</p><pre><code class="hljs language-python">%matplotlib inline

plt.figure(figsize=(<span class="hljs-number">12</span>, <span class="hljs-number">4</span>))

plt.subplot(<span class="hljs-number">121</span>)
plt.plot(lt1000[<span class="hljs-string">'# Friends'</span>], lt1000[<span class="hljs-string">'Ratio'</span>], <span class="hljs-string">'ro'</span>)
plt.plot(gt1000[<span class="hljs-string">'# Friends'</span>] - <span class="hljs-number">1000</span>, gt1000[<span class="hljs-string">'Ratio'</span>], <span class="hljs-string">'bo'</span>)

plt.xlabel(<span class="hljs-string">'# Friends'</span>)
plt.ylabel(<span class="hljs-string">'Realike Ratio'</span>)
</code></pre><pre><code class="hljs language-mipsasm">&#x3C;matplotlib<span class="hljs-meta">.text</span><span class="hljs-meta">.Text</span> <span class="hljs-built_in">at</span> <span class="hljs-number">0x1140b42e8</span>>
</code></pre><img src="/assets/img/output_25_1.png" alt=""><p>This plot might be a lit­tle bit con­fus­ing. The red dots rep­re­sents users with fewer than 1000 friends. The blue dots rep­re­sents users with 1000 or more friends, but the dots are scaled so as to align with the red dots (by sub­tract­ing 1000 from the friend count).</p><p>What does this re­veal? Not much. There are more red dots in the up­per right cor­ner than blue dots, but the points are spread evenly enough where this is in­signif­i­cant.</p><h3>Looking at Friend Counts</h3><p>As an aside, I took a look at the dis­tri­b­u­tion of friend counts.</p><pre><code class="hljs language-python">data[<span class="hljs-string">'# Friends'</span>].describe()
</code></pre><pre><code class="hljs language-apache"><span class="hljs-attribute">count</span>     <span class="hljs-number">278</span>.<span class="hljs-number">000000</span>
<span class="hljs-attribute">mean</span>      <span class="hljs-number">656</span>.<span class="hljs-number">589928</span>
<span class="hljs-attribute">std</span>       <span class="hljs-number">395</span>.<span class="hljs-number">612176</span>
<span class="hljs-attribute">min</span>        <span class="hljs-number">22</span>.<span class="hljs-number">000000</span>
<span class="hljs-attribute">25</span>%       <span class="hljs-number">371</span>.<span class="hljs-number">750000</span>
<span class="hljs-attribute">50</span>%       <span class="hljs-number">564</span>.<span class="hljs-number">500000</span>
<span class="hljs-attribute">75</span>%       <span class="hljs-number">841</span>.<span class="hljs-number">750000</span>
<span class="hljs-attribute">max</span>      <span class="hljs-number">2403</span>.<span class="hljs-number">000000</span>
<span class="hljs-attribute">Name</span>: # Friends, dtype: float<span class="hljs-number">64</span>
</code></pre><p>Conclusion? My friends, on av­er­age, have twice as many friends as I do. Sad.</p><pre><code class="hljs language-python">plt.figure(figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">8</span>))

plt.subplot(<span class="hljs-number">121</span>)
plt.boxplot(data[<span class="hljs-string">'# Friends'</span>])
plt.ylabel(<span class="hljs-string">'# Friends'</span>)

plt.subplot(<span class="hljs-number">122</span>)
plt.hist(data[<span class="hljs-string">'# Friends'</span>], bins=<span class="hljs-number">20</span>)
plt.ylabel(<span class="hljs-string">'Freq.'</span>)
plt.xlabel(<span class="hljs-string">'# Friends'</span>)
plt.title(<span class="hljs-string">'How Many Friends My Friends Have'</span>)

</code></pre><pre><code class="hljs language-mipsasm">&#x3C;matplotlib<span class="hljs-meta">.text</span><span class="hljs-meta">.Text</span> <span class="hljs-built_in">at</span> <span class="hljs-number">0x114f552b0</span>>
</code></pre><figure class="fullwidth">
<img src="/assets/img/output_30_1.png" alt="Graph of friend count distributions.">
<figcaption>Distribution of my friends’ friend counts</figcaption>
</figure><p>As shown by the box plot and, per­haps more ob­vi­ously, by the his­togram, the dis­tri­b­u­tion of friend counts is skewed right, ac­count­ing for the large dif­fer­ence be­tween mean friend count and me­dian friend count. Either way, I look to be pretty anti-so­cial.</p><h3>Conclusions?</h3><p>I can’t re­ally draw any sta­tis­ti­cally sig­nif­i­cant con­clu­sions from these data. That said, there were some trends that were in­sight­ful or in­ter­est­ing to some ex­tent.</p><h4>Quality over Quantity</h4><p>It’s ap­par­ent that hav­ing a higher friend count does not nec­es­sar­ily re­sult in a higher re­alike ra­tio. For 4 of the top 5 ranked re­alike users, the friend count was be­low the third quar­tile. In fact, the user with the high­est friend count (2403 friends) had one of the low­est ra­tios (.8%)</p><p>That said, by ex­am­in­ing the bot­tom 5, al­most all were be­low the me­dian friend count. This seems to im­ply that hav­ing too few friends is also not ideal.</p><p>Given these very broad gen­er­al­iza­tions, one can make the log­i­cal ssump­tion that there is a<span class="push-double"></span> <span class="pull-double">“</span>Goldilocks zone” of friend count that yields that high­est ra­tio. However, the data is prob­a­bly much to scat­tered to be able to ac­tu­ally gen­er­ate a use­ful model.</p><h4>An Individualized Analysis</h4><p>This data set was com­posed of only my friends. This meant the data set was tai­lored uniquely to my choice of friends, which are mostly high school­ers in the <span class="small-caps">NOVA</span> area.</p><h4>Next Steps</h4><p>There are quite a few paths in which I can pro­ceed with this lit­tle ex­per­i­ment, if I want to. For one thing, it would be great to ac­quire more data, and, now that I think of it, gen­er­ally pro­file pic­tures and friend counts are pub­lic, so I could ex­pand the data set to be­yond my friends.</p><p>Looking at the con­tents of the pro­file pic­ture would also be in­ter­est­ing. For ex­am­ple, in pic­tures that were es­pe­cially pop­u­lar, were there mul­ti­ple peo­ple? What is the gen­der / age / etc of the sub­ject? However, this will be a much more non­triv­ial task.</p></section>
</article>

        </div>
    </body>
</html>
