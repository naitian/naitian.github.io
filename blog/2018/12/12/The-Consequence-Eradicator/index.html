<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
            <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-89717266-1"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', 'UA-89717266-1');
        </script>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
        <link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/styles/a11y-dark.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/highlight.min.js"></script>
        <link href="/css/base.css" rel="stylesheet">

        <title>The Consequence Eradicator™</title>
    <link href="/css/blog.css" rel="stylesheet"></head>
    <body>
        <div class="content">
        <nav>
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="/blog">Blog</a></li>
                <li><a href="/feed.xml"><span class="small-caps">RSS</span></a></li>
            </ul> 
        </nav>
        
<article>
    <h1 class="title">The Consequence Eradicator™</h1>
    <section><h2>Table of Contents</h2><ul>
<li><a href="#mhacks-11-and-the-customary-apologies">MHacks 11 (and the cus­tom­ary apolo­gies)</a></li>
<li><a href="#conrad-the-consequence-eradicator">Conrad: the Consequence Eradicator</a></li>
<li><a href="#step-1-data-collection">Step 1: Data Collection</a></li>
<li><a href="#step-2-data-preprocessing">Step 2: Data Preprocessing</a></li>
<li><a href="#step-3-modelling">Step 3: Modelling</a></li>
<li><a href="#step-4-building-the-extension">Step 4: Building the Extension</a></li>
<li><a href="#wrap-up">Wrap-Up</a></li>
</ul></section>
<section><h2>MHacks 11 (and the cus­tom­ary apolo­gies)</h2><p>I have been kind of ter­ri­ble about keep­ing up this blog. Sorry about that. That said,
a lot has hap­pened since the last blog post al­most a full year ago. For one thing, I
am a col­lege kid now!</p><p></p><figure><img src="https://media.giphy.com/media/xWBUky3nYTGDwCUH0T/giphy.gif" alt="Go Blue!"></figure><p></p><p>I also had a great time as a tech in­tern for Capital One over the sum­mer (something I’m
definitely go­ing to be writ­ing about very soon).</p><p>But let’s get back to this story.</p><p>MHacks 11 was held at the University of Michigan from October 12 - 14. I con­vinced my
friend, David, to fly up to Ann Arbor all the way from Charlottesville for the event.</p><p>What fol­lows is the story of how David (<span class="small-caps">UVA</span> <span class="push-single"></span><span class="pull-single">’</span>19), Renee (also U-M<span class="push-single"></span> <span class="pull-single">’</span>22), and I did our parts in
con­tribut­ing to the eerie con­ver­gence be­tween the Simpsons and re­al­ity.</p></section>
<section><h2>Conrad: the Consequence Eradicator</h2><iframe width="560" height="315" src="https://www.youtube.com/embed/edoo6dH19ko" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><p>You don’t need to watch the whole video (though I highly en­cour­age it). Basically, Lisa and a
team of pro­gram­mers write an ar­ti­fi­cial in­tel­li­gence (Conrad) to pre­dict the out­comes of
so­cial me­dia posts.</p><p>Thusly in­spired, we made a Chrome ex­ten­sion which pre­dicts the re­ac­tions a post on Facebook
would get.</p></section>
<section><h2>Step 1: Data Collection</h2><p>Fortunately for us, <a href="https://github.com/minimaxir">@minimaxir</a> on Github had a rel­a­tively large
dataset of pub­lic posts from large Facebook pages, and their re­ac­tions. The dataset is linked
<a href="https://github.com/minimaxir/interactive-facebook-reactions">here</a>. I only found out later that
he also did our ex­act same pro­ject, but what­ever.</p><p>Anyway, that was data col­lec­tion.</p></section>
<section><h2>Step 2: Data Preprocessing</h2><p>We chose only to look at posts with text con­tent (so we ig­nored shared links, pho­tos, videos, etc.)
We also only con­sid­ered posts less than 1000 char­ac­ters long, and which had more than 11 non-like
re­acts.</p></section>
<section><h2>Step 3: Modelling</h2><p>We spent most of Saturday do­ing pre­pro­cess­ing, and then even­tu­ally re­al­ized we still had to ac­tu­ally
build a model. We started off by try­ing a ran­dom for­est re­gres­sion with bag of words. Results were not
great.</p><p>After tweak­ing the hy­per­pa­ra­me­ters around a bit, it be­came clear re­sults weren’t im­prov­ing.</p><p>That’s when we took the leap to us­ing <code>gensim</code> and <code>doc2vec</code> to gen­er­ate sen­tence em­bed­dings.
This meant that, in­stead of just us­ing word fre­quency, we used a much more com­plex model to en­code
posts which took into ac­count word or­der.</p><p>This yielded much bet­ter re­sults, es­pe­cially af­ter I also nor­mal­ized the tar­get out­put.</p></section>
<section><h2>Step 4: Building the Extension</h2><p>At this point, it was the morn­ing of demos, and while we had a halfway de­cent model, the chrome
ex­ten­sion was non-ex­is­tent.</p><p>So came the mad scram­ble, in which I was lit­er­ally writ­ing code as we walked to the <span class="small-caps">IM</span> build­ing.
I wrote a small Flask <span class="small-caps">API</span> back­end, which the Chrome ex­ten­sion was sup­posed to call.</p><p>Initially, I did­n’t want to deal with the Chrome mes­sag­ing pro­to­col, so I tried to make the call
di­rectly from the con­tent script (which ran as Javascript code on the client with no ex­tra
per­mis­sions).</p><p>We ran into a road­block, where cross ori­gin re­quests were for­bid­den. I tried to over­come this
by edit­ing my <code>/etc/hosts</code> file to redi­rect some an­cil­lary Facebook do­main to <code>localhost</code>. This
<em>al­most</em> worked, ex­cept Facebook also ex­pected https-only re­quests, so I was stuck with hav­ing
to do the <em>cor­rect</em> thing of us­ing Chrome’s mes­sag­ing pro­to­col.</p><p>By this point, I’m writ­ing the code while we are stand­ing at our demo table.</p><p>It turned out to ac­tu­ally be su­per easy to use the mes­sag­ing pro­to­col, but that did­n’t stop me
from screw­ing up 11 times be­fore I fi­nally got every­thing work­ing.</p><p></p><figure><img src="https://media.giphy.com/media/l2JejtUtX0ImRvLnq/giphy.gif" alt="Literally Me Celebrating"></figure><p></p><p>This was me when I fi­nally got the Chrome ex­ten­sion to work.</p></section>
<section><h2>Wrap-Up</h2><p>Unfortunately, I have no screen­shots of the ac­tual app work­ing, <em>but</em> if you want to run the janky
code for your­self, it’s all open source on <a href="https://github.com/naitian/conrad">Github</a>.</p><p>I learned a lot through this hackathon. It was the first hackathon pro­ject that I did with a
heavy data sci­ence work­flow.</p><p>This hackathon was a blast, and <a href="http://davidzhao.me">David</a> and <a href="https://github.com/reneeli411">Renee</a>
were awe­some team­mates.</p></section>
</article>

        </div>
    </body>
</html>
