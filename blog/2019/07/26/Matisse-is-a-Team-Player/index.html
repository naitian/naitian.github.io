<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
        <link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/styles/a11y-dark.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/highlight.min.js"></script>
        <link href="/css/base.css" rel="stylesheet">

        <title>Matisse is a Team Player</title>
    <link href="/css/blog.css" rel="stylesheet"></head>
    <body>
        <div class="content">
        <nav>
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="/blog">Blog</a></li>
            </ul> 
        </nav>
        
<article>
    <h1 class="title">Matisse is a Team Player</h1>
    <figure class="figure fullwidth">
    <img src="/assets/img/bookstory.png">
    <figcaption class="img-caption"></figcaption>
</figure>
<section><h2></h2><blockquote>
<p>Henri Matisse works well with others in the courtyard of the Kabbalist, and in
the morning, Leonardo's shadow got to give the people what they want.</p>
</blockquote><p>Two very influential artists, to be sure, but what was Matisse doing
collaborating with Kabbalists, and what exactly did the people want from
Leonardo's shadow?</p></section>
<section><h2>Table of Contents</h2><ul>
<li><a href="#some-context">Some Context</a></li>
<li><a href="#the-project">The Project</a>
<ul>
<li><a href="#grammar-school-constituency">Grammar School: Constituency</a></li>
<li><a href="#the-nitty-gritty">The Nitty Gritty</a></li>
<li><a href="#parsing">Parsing</a></li>
<li><a href="#creating-sentences">Creating Sentences</a></li>
<li><a href="#gallery">Gallery</a></li>
</ul>
</li>
</ul></section>
<section><h2>Some Context</h2><p>In mid-June, Randall Munroe, the genius behind <a href="http://xkcd.com">xkcd</a> and the
author of
<a href="https://www.amazon.com/Thing-Explainer-Complicated-Stuff-Simple/dp/0544668251/">quite</a>
a
<a href="https://www.amazon.com/What-If-Scientific-Hypothetical-Questions-ebook/dp/B00IYUYF4A">few</a>
<a href="https://www.amazon.com/How-Absurd-Scientific-Real-World-Problems/dp/0525537090">books</a>,
announced he was going on a book tour to promote his latest book: <em>How To:
Absurd Scientific Advice for Common Real-World Problems</em></p><p>As part of the announcement, he introduced an interesting challenge:</p><blockquote>
<p>Write the best story using nothing but book covers.</p>
</blockquote><p>The winner of the challenge would be rewarded by a visit from Munroe as part of
the tour. Even though Ann Arbor was already in the itinerary, I couldn't help
but think about this challenge... and how I could use some of my linguistics
knowledge to my advantage.</p></section>
<section><h2>The Project</h2><p>I decided I would try to hack this challenge by acquiring a dataset of book
titles, and having a computer generate these stories for me.</p><p>I found a <a href="https://github.com/uchidalab/book-dataset/">list</a> of over 200,000
books listed on Amazon, and a couple of Jupyter notebooks and Python packages
later, we were off to the races.</p><h3>Grammar School: Constituency</h3><p>The key concept behind this project was something I learned in my introduction
to linguistics class last fall: constituency trees. The basic idea is that each
sentence can be represented as a combination of words and phrases
(constituents).</p><p>For example, a sentence is, in its base form, a noun phrase and a verb phrase:</p><p><code>S -> NP VP</code></p><p>And a noun phrase might be a noun, with optional adjectives and determiners, and
maybe a prepositional phrase.</p><p><code>NP -> [DET] [ADJ] N [PP]</code></p><p>And a prepositional phrase, in turn, might be a preposition followed by a noun
phrase.</p><p><code>PP -> [P] [NP]</code></p><p>And in this way, we can construct a very expressive and <em>productive</em> grammar for
the English language. Productivity here means that, with even a limited
vocabulary, we can form many distinct sentences and thoughts.</p><p>So the main idea was we would label each book title as a noun phrase, verb phrase,
adjective phrase, etc. Then, we could use this grammar to compose sentences.</p><h3>The Nitty Gritty</h3><p>Although there were over 200,000 books in the dataset, I couldn't use all of
them. In fact, out of 32 categories, I used only 10. Books with categories such
as cookbooks, calendars, etc were excluded because those titles were generally
not very useful.</p><p>The categories I ended up using were:</p><ul>
<li>Biographies &#x26; Memoirs</li>
<li>Children's Books</li>
<li>Engineering &#x26; Transportation</li>
<li>History</li>
<li>Humor &#x26; Entertainment</li>
<li>Literature &#x26; Fiction</li>
<li>Mystery, Thriller &#x26; Suspense</li>
<li>Science Fiction &#x26; Fantasy</li>
<li>Self-Help</li>
<li>Teen &#x26; Young Adult</li>
</ul><p>I also did some preprocessing on the titles before parsing the constituents.</p><pre><code class="hljs language-py">cleaned_titles = books.title.<span class="hljs-built_in">str</span>.lower()  <span class="hljs-comment"># Lowercase</span>
cleaned_titles = cleaned_titles.<span class="hljs-built_in">str</span>.replace(<span class="hljs-string">r"\(.+\)"</span>, <span class="hljs-string">""</span>)  <span class="hljs-comment"># Remove everything in parentheses</span>
cleaned_titles = cleaned_titles.<span class="hljs-built_in">str</span>.replace(<span class="hljs-string">r"\[.+\]"</span>, <span class="hljs-string">""</span>)  <span class="hljs-comment"># Remove everything in brackets</span>
cleaned_titles = cleaned_titles.<span class="hljs-built_in">str</span>.replace(<span class="hljs-string">r"(volume|vol\.) (\d+|\w+)"</span>, <span class="hljs-string">""</span>)  <span class="hljs-comment"># Remove volume numbers</span>
cleaned_titles = cleaned_titles.<span class="hljs-built_in">str</span>.replace(<span class="hljs-string">r"issue (\d+|\w+)"</span>, <span class="hljs-string">""</span>)  <span class="hljs-comment"># Remove issue numbers</span>
cleaned_titles = cleaned_titles.<span class="hljs-built_in">str</span>.strip(<span class="hljs-string">'-, '</span>)  <span class="hljs-comment"># Remove dashes</span>
cleaned_titles = cleaned_titles.apply(<span class="hljs-keyword">lambda</span> x: x.split(<span class="hljs-string">':'</span>)[<span class="hljs-number">0</span>])  <span class="hljs-comment"># Only keep first part of title (no subtitles)</span>
</code></pre><p>The last part -- getting rid of subtitles -- sometimes helped and sometimes did
not.</p><h3>Parsing</h3><p>I used <a href="https://pypi.org/project/benepar/">benepar</a>, which is a state of the art
constituency parser that fits nicely into NLTK. I found that it provided decent
results. One issue that I ran into was handling more granular details such as
subject verb plurality alignment. In those cases, I wanted to know what the noun
was in the noun phrase, etc.</p><p>For this, I used a different grammar model: dependency grammar. In dependency
grammars, instead constituents, each word is dependent on exactly one other word
in the sentence. This image from Wikipedia is pretty good at showing the
difference between the two.</p><p></p><figure><img src="https://upload.wikimedia.org/wikipedia/commons/0/0d/Wearetryingtounderstandthedifference_%282%29.jpg" alt="Dependency vs Constituency"></figure><p></p><p>I use the root of each dependency tree as the "active noun" or "active verb" in
the phrase, and their parts of speech include markers for plurality, properness,
verb tense, etc.</p><h3>Creating Sentences</h3><p>Afterwards, it was just a process of returning a random sample for each
constituent. I wanted the sentence generation to be completely automated, but I
ended up adopting a more hybrid process where I would query for noun phrases,
for example, until I found one I thought was interesting, then move on to a verb
phrase.</p><h3>Gallery</h3><p>Here are a couple more sentences I put together with the help of computers. Stay
tuned for an online interactive version in coming days that will let you
construct your own book cover stories.</p><p></p><figure><img src="https://imgur.com/w7eq9RN.jpg" alt=""></figure><p></p><blockquote>
<p>Radioactive horses and ponies thank you for being a good friend, but not the
hippopotamus.</p>
</blockquote><p></p><figure><img src="https://imgur.com/PXWmSqe.jpg" alt=""></figure><p></p><blockquote>
<p>19 varieties of gazelle found apple, apples everywhere!</p>
</blockquote><p></p><figure><img src="https://imgur.com/eLuT35e.jpg" alt=""></figure><p></p><blockquote>
<p>The Russian Kremlin desperately seeking exclusivity around the world with
Justin Bieber.</p>
</blockquote></section>
</article>

        </div>
    </body>
</html>
