<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
            <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-89717266-1"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', 'UA-89717266-1');
        </script>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
        <link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/styles/a11y-dark.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/highlight.min.js"></script>
        <link href="/css/base.css" rel="stylesheet">

        <title>Matisse is a Team Player</title>
    <link href="/css/blog.css" rel="stylesheet"></head>
    <body>
        <div class="content">
        <nav>
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="/blog">Blog</a></li>
                <li><a href="/feed.xml"><span class="small-caps">RSS</span></a></li>
            </ul> 
        </nav>
        
<article>
    <h1 class="title">Matisse is a Team Player</h1>
    <figure class="figure fullwidth">
    <img src="/assets/img/bookstory.png">
    <figcaption class="img-caption"></figcaption>
</figure>
<section><h2></h2><blockquote>
<p>Henri Matisse works well with oth­ers in the court­yard of the Kabbalist, and in
the morn­ing, Leonardo’s shadow got to give the peo­ple what they want.</p>
</blockquote><p>Two very in­flu­en­tial artists, to be sure, but what was Matisse do­ing
col­lab­o­rat­ing with Kabbalists, and what ex­actly did the peo­ple want from
Leonar­do’s shadow?</p></section>
<section><h2>Table of Contents</h2><ul>
<li><a href="#some-context">Some Context</a></li>
<li><a href="#the-project">The Project</a>
<ul>
<li><a href="#grammar-school-constituency">Grammar School: Constituency</a></li>
<li><a href="#the-nitty-gritty">The Nitty Gritty</a></li>
<li><a href="#parsing">Parsing</a></li>
<li><a href="#creating-sentences">Creating Sentences</a></li>
<li><a href="#gallery">Gallery</a></li>
</ul>
</li>
</ul></section>
<section><h2>Some Context</h2><p>In mid-June, Randall Munroe, the ge­nius be­hind <a href="http://xkcd.com">xkcd</a> and the
au­thor of
<a href="https://www.amazon.com/Thing-Explainer-Complicated-Stuff-Simple/dp/0544668251/">quite</a>
a
<a href="https://www.amazon.com/What-If-Scientific-Hypothetical-Questions-ebook/dp/B00IYUYF4A">few</a>
<a href="https://www.amazon.com/How-Absurd-Scientific-Real-World-Problems/dp/0525537090">books</a>,
announced he was go­ing on a book tour to pro­mote his lat­est book: <em>How To:
Absurd Scientific Advice for Common Real-World Problems</em></p><p>As part of the an­nounce­ment, he in­tro­duced an in­ter­est­ing chal­lenge:</p><blockquote>
<p>Write the best story us­ing noth­ing but book cov­ers.</p>
</blockquote><p>The win­ner of the chal­lenge would be re­warded by a visit from Munroe as part of
the tour. Even though Ann Arbor was al­ready in the itin­er­ary, I could­n’t help
but think about this chal­lenge&hellip; and how I could use some of my lin­guis­tics
knowl­edge to my ad­van­tage.</p></section>
<section><h2>The Project</h2><p>I de­cided I would try to hack this chal­lenge by ac­quir­ing a dataset of book
ti­tles, and hav­ing a com­puter gen­er­ate these sto­ries for me.</p><p>I found a <a href="https://github.com/uchidalab/book-dataset/">list</a> of over 200,000
books listed on Amazon, and a cou­ple of Jupyter note­books and Python pack­ages
later, we were off to the races.</p><h3>Grammar School: Constituency</h3><p>The key con­cept be­hind this pro­ject was some­thing I learned in my in­tro­duc­tion
to lin­guis­tics class last fall: con­stituency trees. The ba­sic idea is that each
sen­tence can be rep­re­sented as a com­bi­na­tion of words and phrases
(con­stituents).</p><p>For ex­am­ple, a sen­tence is, in its base form, a noun phrase and a verb phrase:</p><p><code>S -> NP VP</code></p><p>And a noun phrase might be a noun, with op­tional ad­jec­tives and de­ter­min­ers, and
maybe a prepo­si­tional phrase.</p><p><code>NP -> [DET] [ADJ] N [PP]</code></p><p>And a prepo­si­tional phrase, in turn, might be a prepo­si­tion fol­lowed by a noun
phrase.</p><p><code>PP -> [P] [NP]</code></p><p>And in this way, we can con­struct a very ex­pres­sive and <em>pro­duc­tive</em> gram­mar for
the English lan­guage. Productivity here means that, with even a lim­ited
vo­cab­u­lary, we can form many dis­tinct sen­tences and thoughts.</p><p>So the main idea was we would la­bel each book ti­tle as a noun phrase, verb phrase,
ad­jec­tive phrase, etc. Then, we could use this gram­mar to com­pose sen­tences.</p><h3>The Nitty Gritty</h3><p>Although there were over 200,000 books in the dataset, I could­n’t use all of
them. In fact, out of 32 cat­e­gories, I used only 10. Books with cat­e­gories such
as cook­books, cal­en­dars, etc were ex­cluded be­cause those ti­tles were gen­er­ally
not very use­ful.</p><p>The cat­e­gories I ended up us­ing were:</p><ul>
<li>Biographies &#x26; Memoirs</li>
<li>Children’s Books</li>
<li>Engineering &#x26; Transportation</li>
<li>History</li>
<li>Humor &#x26; Entertainment</li>
<li>Literature &#x26; Fiction</li>
<li>Mystery, Thriller &#x26; Suspense</li>
<li>Science Fiction &#x26; Fantasy</li>
<li>Self-Help</li>
<li>Teen &#x26; Young Adult</li>
</ul><p>I also did some pre­pro­cess­ing on the ti­tles be­fore pars­ing the con­stituents.</p><pre><code class="hljs language-py">cleaned_titles = books.title.<span class="hljs-built_in">str</span>.lower()  <span class="hljs-comment"># Lowercase</span>
cleaned_titles = cleaned_titles.<span class="hljs-built_in">str</span>.replace(<span class="hljs-string">r"\(.+\)"</span>, <span class="hljs-string">""</span>)  <span class="hljs-comment"># Remove everything in parentheses</span>
cleaned_titles = cleaned_titles.<span class="hljs-built_in">str</span>.replace(<span class="hljs-string">r"\[.+\]"</span>, <span class="hljs-string">""</span>)  <span class="hljs-comment"># Remove everything in brackets</span>
cleaned_titles = cleaned_titles.<span class="hljs-built_in">str</span>.replace(<span class="hljs-string">r"(volume|vol\.) (\d+|\w+)"</span>, <span class="hljs-string">""</span>)  <span class="hljs-comment"># Remove volume numbers</span>
cleaned_titles = cleaned_titles.<span class="hljs-built_in">str</span>.replace(<span class="hljs-string">r"issue (\d+|\w+)"</span>, <span class="hljs-string">""</span>)  <span class="hljs-comment"># Remove issue numbers</span>
cleaned_titles = cleaned_titles.<span class="hljs-built_in">str</span>.strip(<span class="hljs-string">'-, '</span>)  <span class="hljs-comment"># Remove dashes</span>
cleaned_titles = cleaned_titles.apply(<span class="hljs-keyword">lambda</span> x: x.split(<span class="hljs-string">':'</span>)[<span class="hljs-number">0</span>])  <span class="hljs-comment"># Only keep first part of title (no subtitles)</span>
</code></pre><p>The last part&thinsp;&mdash;&thinsp;get­ting rid of sub­ti­tles&thinsp;&mdash;&thinsp;some­times helped and some­times did
not.</p><h3>Parsing</h3><p>I used <a href="https://pypi.org/project/benepar/">benepar</a>, which is a state of the art
con­stituency parser that fits nicely into <span class="small-caps">NLTK</span>. I found that it pro­vided de­cent
re­sults. One is­sue that I ran into was han­dling more gran­u­lar de­tails such as
sub­ject verb plu­ral­ity align­ment. In those cases, I wanted to know what the noun
was in the noun phrase, etc.</p><p>For this, I used a dif­fer­ent gram­mar model: de­pen­dency gram­mar. In de­pen­dency
gram­mars, in­stead con­stituents, each word is de­pen­dent on ex­actly one other word
in the sen­tence. This im­age from Wikipedia is pretty good at show­ing the
dif­fer­ence be­tween the two.</p><p></p><figure><img src="https://upload.wikimedia.org/wikipedia/commons/0/0d/Wearetryingtounderstandthedifference_%282%29.jpg" alt="Dependency vs Constituency"></figure><p></p><p>I use the root of each de­pen­dency tree as the<span class="push-double"></span> <span class="pull-double">“</span>active noun” or<span class="push-double"></span> <span class="pull-double">“</span>active verb” in
the phrase, and their parts of speech in­clude mark­ers for plu­ral­ity, proper­ness,
verb tense, etc.</p><h3>Creating Sentences</h3><p>Afterwards, it was just a process of re­turn­ing a ran­dom sam­ple for each
con­stituent. I wanted the sen­tence gen­er­a­tion to be com­pletely au­to­mated, but I
ended up adopt­ing a more hy­brid process where I would query for noun phrases,
for ex­am­ple, un­til I found one I thought was in­ter­est­ing, then move on to a verb
phrase.</p><h3>Gallery</h3><p>Here are a cou­ple more sen­tences I put to­gether with the help of com­put­ers. Stay
tuned for an on­line in­ter­ac­tive ver­sion in com­ing days that will let you
con­struct your own book cover sto­ries.</p><p></p><figure><img src="https://imgur.com/w7eq9RN.jpg" alt=""></figure><p></p><blockquote>
<p>Radioactive horses and ponies thank you for be­ing a good friend, but not the
hip­popota­mus.</p>
</blockquote><p></p><figure><img src="https://imgur.com/PXWmSqe.jpg" alt=""></figure><p></p><blockquote>
<p>19 va­ri­eties of gazelle found ap­ple, ap­ples every­where!</p>
</blockquote><p></p><figure><img src="https://imgur.com/eLuT35e.jpg" alt=""></figure><p></p><blockquote>
<p>The Russian Kremlin des­per­ately seek­ing ex­clu­siv­ity around the world with
Justin Bieber.</p>
</blockquote></section>
</article>

        </div>
    </body>
</html>
